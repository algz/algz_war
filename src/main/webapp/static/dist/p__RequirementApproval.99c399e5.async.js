(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[381],{74301:function(Q,R,e){"use strict";e.r(R),e.d(R,{default:function(){return ae}});var G=e(43358),T=e(90290),p=e(2824),U=e(75362),f=e(67294),b=e(19595),E=e(11849),m=e(3182),S=e(94043),s=e.n(S),D=e(48971);function B(r,o){return C.apply(this,arguments)}function C(){return C=(0,m.Z)(s().mark(function r(o,g){return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,D.WY)("/algz/requirementfilling/fillings",(0,E.Z)({method:"GET",params:(0,E.Z)({},o)},g||{})));case 1:case"end":return d.stop()}},r)})),C.apply(this,arguments)}function y(r){return V.apply(this,arguments)}function V(){return V=(0,m.Z)(s().mark(function r(o){return s().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,D.WY)("/algz/requirementapproval/submitdefinition",{method:"POST",requestType:"form",data:o}));case 1:case"end":return h.stop()}},r)})),V.apply(this,arguments)}var I=function(){var r=(0,m.Z)(s().mark(function o(g){return s().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,D.WY)("/algz/requirementapproval/definitiondetails",{method:"Get",params:(0,E.Z)({},g)}));case 1:case"end":return d.stop()}},o)}));return function(g){return r.apply(this,arguments)}}(),ie=e(47673),X=e(4107),se=e(48736),k=e(27049),ue=e(13062),N=e(71230),le=e(89032),Y=e(15746),oe=e(57663),_=e(71577),de=e(34792),j=e(48086),q=e(37476),t=e(85893),ee=function(r){var o,g=(0,f.useRef)(null),h=(0,f.useState)(),d=(0,p.Z)(h,2),Z=d[0],M=d[1],O=(0,f.useState)(),F=(0,p.Z)(O,2),K=F[0],$=F[1],w=(0,f.useState)("0"),W=(0,p.Z)(w,2),L=W[0],z=W[1],P=[{dataIndex:"index",valueType:"indexBorder",width:48},{dataIndex:"indicatorParentId",width:0,filteredValue:K||null,onFilter:function(a,u){var l;return(l=u.indicatorParentId)===null||l===void 0?void 0:l.includes(a)},renderText:function(){return" "}},{title:"\u9700\u6C42\u63CF\u8FF0",dataIndex:"description"},{title:"\u6307\u6807\u540D\u79F0",dataIndex:"indicatorName"},{title:"\u503C",dataIndex:"val"},{title:"\u7248\u672C",dataIndex:"version"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createDate"}];return(0,t.jsxs)(q.Z,{title:"\u9700\u6C42\u5BA1\u7B7E",width:"800px",modalProps:{onCancel:function(){var c=(0,m.Z)(s().mark(function u(){return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:case"end":return i.stop()}},u)}));function a(){return c.apply(this,arguments)}return a}()},visible:r.modalVisible,onVisibleChange:function(){var c=(0,m.Z)(s().mark(function a(u){return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:r.onVisibleChange(u);case 1:case"end":return i.stop()}},a)}));return function(a){return c.apply(this,arguments)}}(),onFinish:function(){var c=(0,m.Z)(s().mark(function a(u){var l,i;return s().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=j.default.loading("\u6B63\u5728\u63D0\u4EA4"),v.prev=1,v.next=4,y({definitionId:(i=r.currentRecord)===null||i===void 0?void 0:i.id,approvalResult:"1",approvalComment:Z,kind:"2"});case 4:l(),j.default.success("\u63D0\u4EA4\u6210\u529F\uFF01"),r.onVisibleChange(!1),r.updateDefinitionTable(),v.next=14;break;case 10:v.prev=10,v.t0=v.catch(1),l(),j.default.error("\u63D0\u4EA4\u5931\u8D25,\u8BF7\u518D\u8BD5\u4E00\u6B21\uFF01");case 14:case"end":return v.stop()}},a,null,[[1,10]])}));return function(a){return c.apply(this,arguments)}}(),submitter:{searchConfig:{submitText:"\u901A\u8FC7",resetText:"\u53D6\u6D88"},render:function(a,u){return[u[0],r.isEdit?[(0,t.jsx)(_.Z,{onClick:(0,m.Z)(s().mark(function l(){var i,x;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=j.default.loading("\u6B63\u5728\u63D0\u4EA4"),n.prev=1,n.next=4,y({definitionId:(x=r.currentRecord)===null||x===void 0?void 0:x.id,approvalResult:"0",approvalComment:Z,kind:"2"});case 4:i(),j.default.success("\u63D0\u4EA4\u6210\u529F\uFF01"),r.onVisibleChange(!1),r.updateDefinitionTable(),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),i(),j.default.error("\u63D0\u4EA4\u5931\u8D25,\u8BF7\u518D\u8BD5\u4E00\u6B21\uFF01");case 14:case"end":return n.stop()}},l,null,[[1,10]])})),children:"\u4E0D\u901A\u8FC7"},"feedbackBtn"),u[1]]:""]}},children:[(0,t.jsx)(N.Z,{children:(0,t.jsx)(Y.Z,{span:24,children:(0,t.jsx)(b.ZP,{rowKey:"indicatorId",search:!1,params:{definitonId:(o=r.currentRecord)===null||o===void 0?void 0:o.id},request:function(){var c=(0,m.Z)(s().mark(function a(u,l,i){var x;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I((0,E.Z)({},u));case 2:return x=n.sent,M(x.approvalComment),n.abrupt("return",Promise.resolve({data:function(){return x.data},success:!0}));case 5:case"end":return n.stop()}},a)}));return function(a,u,l){return c.apply(this,arguments)}}(),columns:P,pagination:!1,options:!1,toolbar:{menu:{type:"tab",activeKey:L,items:[{key:"0",label:(0,t.jsx)("span",{children:"\u5168\u90E8"})},{key:"1",label:(0,t.jsx)("span",{children:"\u52A8\u529B\u8F85\u52A9"})},{key:"2",label:(0,t.jsx)("span",{children:"\u4F5C\u52A8"})},{key:"3",label:(0,t.jsx)("span",{children:"\u73AF\u63A7"})},{key:"4",label:(0,t.jsx)("span",{children:"\u4F9B\u7535"})},{key:"5",label:(0,t.jsx)("span",{children:"\u71C3\u6CB9"})}],onChange:function(a){a=="0"?$([]):$([a]),z(a)}}}})})}),(0,t.jsx)(N.Z,{children:(0,t.jsxs)(Y.Z,{span:24,children:[(0,t.jsx)(k.Z,{orientation:"left",children:"\u5BA1\u7B7E\u610F\u89C1"}),(0,t.jsx)(X.Z.TextArea,{rows:4,value:Z,onChange:function(a){return M(a.target.value)}})]})})]})},te=e(75640),ae=function(){var r=(0,f.useState)("2"),o=(0,p.Z)(r,2),g=o[0],h=o[1],d=(0,f.useState)(!0),Z=(0,p.Z)(d,2),M=Z[0],O=Z[1],F=(0,f.useState)(!1),K=(0,p.Z)(F,2),$=K[0],w=K[1],W=(0,f.useState)(!1),L=(0,p.Z)(W,2),z=L[0],P=L[1],c=(0,f.useState)(),a=(0,p.Z)(c,2),u=a[0],l=a[1],i=(0,f.useRef)(),x=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u8BF4\u660E",dataIndex:"description",valueType:"textarea"},{title:"\u521B\u5EFA\u4EBA",dataIndex:"creatorName"},{title:"\u72B6\u6001",dataIndex:"state",hideInForm:!0,valueEnum:{2:{text:"\u5DF2\u586B\u5145",status:"Processing"},3:{text:"\u5DF2\u5BA1\u7B7E",status:"Processing"},4:{text:"\u5DF2\u5224\u5B9A",status:"Processing"},5:{text:"\u5DF2\u5B8C\u6210",status:"Success"},6:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u521B\u5EFA\u65E5\u671F",sorter:!0,dataIndex:"createDate",valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(n,A){var H=[(0,t.jsx)("a",{onClick:function(){P(!0),l(A),O(!0)},children:"\u7F16\u8F91"},"editor")],ne=[(0,t.jsx)("a",{onClick:function(){P(!0),l(A),O(!1)},children:"\u67E5\u770B"},"editor")],re=(0,t.jsx)("a",{onClick:function(){w(!0),l(A)},children:"\u5BA1\u6279"},"viewApproval");return[g=="2"?H:ne,re]}}];return(0,t.jsxs)(U.ZP,{children:[(0,t.jsx)(b.ZP,{actionRef:i,columns:x,rowKey:"id",request:B,params:{state:g},search:!1,toolBarRender:function(){return[(0,t.jsxs)(T.Z,{placeholder:"\u5F85\u5BA1\u7B7E",onChange:function(A,H){h(A)},children:[(0,t.jsx)(T.Z.Option,{value:"2",children:"\u5F85\u5BA1\u7B7E"}),(0,t.jsx)(T.Z.Option,{value:"3,4,5",children:"\u5DF2\u5BA1\u7B7E"})]})]}}),(0,t.jsx)(ee,{isEdit:M,modalVisible:z,onVisibleChange:P,currentRecord:u,updateDefinitionTable:function(){var n;return(n=i.current)===null||n===void 0?void 0:n.reload()}}),(0,t.jsx)(te.Z,{definitionId:(u==null?void 0:u.id)+"",visible:$,onVisibleChange:w})]})}},75640:function(Q,R,e){"use strict";var G=e(3182),T=e(94043),p=e.n(T),U=e(37476),f=e(19595),b=e(67294),E=e(48971),m=e(85893);R.Z=function(S){var s=(0,b.useRef)(),D=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5F53\u524D\u8282\u70B9",dataIndex:"kindName"},{title:"\u5BA1\u6279\u4EBA",dataIndex:"creatorName"},{title:"\u5B8C\u6210\u65F6\u95F4",sorter:!0,dataIndex:"createDate",valueType:"dateTime"},{title:"\u5BA1\u6279\u7C7B\u578B",dataIndex:"approvalResult",hideInForm:!0,valueEnum:{0:{text:"\u4E0D\u901A\u8FC7",status:"Error"},1:{text:"\u901A\u8FC7",status:"Success"}}},{title:"\u5BA1\u6279\u610F\u89C1",dataIndex:"approvalComment",valueType:"textarea"}];return(0,m.jsx)(U.Z,{title:"\u5BA1\u6279\u8BE6\u7EC6",width:"800px",layout:"horizontal",visible:S.visible,onVisibleChange:S.onVisibleChange,submitter:{searchConfig:{resetText:"\u5173\u95ED"},render:function(C,y){return[y[0]]}},children:(0,m.jsx)(f.ZP,{actionRef:s,columns:D,rowKey:"id",search:!1,toolBarRender:!1,params:{definitionId:S.definitionId},request:function(){var B=(0,G.Z)(p().mark(function C(y){return p().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,E.WY)("/algz/approvalcommentmanger/approvalcomments",{params:y}));case 1:case"end":return I.stop()}},C)}));return function(C){return B.apply(this,arguments)}}()})})}}}]);
