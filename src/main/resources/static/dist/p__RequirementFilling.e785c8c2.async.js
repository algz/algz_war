(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[974],{90672:function(H,F,t){"use strict";var V=t(67294),w=t(94573),S=t(64893),P=["fieldProps","proFieldProps"];function I(){return I=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}function x(e,l){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);l&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Z(e){for(var l=1;l<arguments.length;l++){var r=arguments[l]!=null?arguments[l]:{};l%2?x(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D(e,l,r){return l in e?Object.defineProperty(e,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[l]=r,e}function p(e,l){if(e==null)return{};var r=W(e,l),n,o;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(o=0;o<b.length;o++)n=b[o],!(l.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function W(e,l){if(e==null)return{};var r={},n=Object.keys(e),o,b;for(b=0;b<n.length;b++)o=n[b],!(l.indexOf(o)>=0)&&(r[o]=e[o]);return r}var u=function(l,r){var n=l.fieldProps,o=l.proFieldProps,b=p(l,P);return V.createElement(w.ZP,I({text:n==null?void 0:n.value,ref:r,mode:"edit",valueType:"textarea",fieldProps:Z(Z({},n),{},{onChange:function(){for(var B,j,L=arguments.length,T=new Array(L),$=0;$<L;$++)T[$]=arguments[$];n==null||(B=n.onChange)===null||B===void 0||B.call.apply(B,[n].concat(T)),b==null||(j=b.onChange)===null||j===void 0||j.call.apply(j,[b].concat(T))}})},o))};F.Z=(0,S.Z)(V.forwardRef(u))},24:function(H,F,t){"use strict";t.r(F),t.d(F,{default:function(){return le}});var V=t(43358),w=t(90290),S=t(93224),P=t(2824),I=t(75362),x=t(67294),Z=t(19595),D=t(11849),p=t(3182),W=t(94043),u=t.n(W),e=t(48971);function l(i,c){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(u().mark(function i(c,C){return u().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,e.WY)("/algz/requirementfilling/fillings",(0,D.Z)({method:"GET",params:(0,D.Z)({},c)},C||{})));case 1:case"end":return O.stop()}},i)})),r.apply(this,arguments)}function n(i){return o.apply(this,arguments)}function o(){return o=(0,p.Z)(u().mark(function i(c){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,e.WY)("/algz/requirementfilling/definitiondetails",{params:c}));case 1:case"end":return s.stop()}},i)})),o.apply(this,arguments)}function b(i){return K.apply(this,arguments)}function K(){return K=(0,p.Z)(u().mark(function i(c){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,e.WY)("/algz/requirementfilling/updatedefinitiondetail",{params:c}));case 1:case"end":return s.stop()}},i)})),K.apply(this,arguments)}function B(i){return j.apply(this,arguments)}function j(){return j=(0,p.Z)(u().mark(function i(c){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,e.WY)("/algz/requirementfilling/submitdefinition",{params:c}));case 1:case"end":return s.stop()}},i)})),j.apply(this,arguments)}function L(i){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(u().mark(function i(c){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,e.WY)("/algz/requirementfilling/feedbackdefinition",{params:c}));case 1:case"end":return s.stop()}},i)})),T.apply(this,arguments)}var $=t(57663),te=t(71577),de=t(34792),Y=t(48086),J=t(37476),ne=t(90672),d=t(85893),re=function(i){return(0,d.jsx)(J.Z,{title:"\u53CD\u9988",width:"500px",layout:"horizontal",modalProps:{destroyOnClose:!0,onCancel:function(){var c=(0,p.Z)(u().mark(function s(){return u().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:case"end":return E.stop()}},s)}));function C(){return c.apply(this,arguments)}return C}()},visible:i.visible,onVisibleChange:i.onVisibleChange,onFinish:i.onFinish,children:(0,d.jsx)(ne.Z,{name:"approvalComment",label:"\u5185\u5BB9",tooltip:"\u6700\u957F\u4E3A 225 \u4F4D",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"})})},ae=function(i){var c,C=(0,x.useState)(!1),s=(0,P.Z)(C,2),O=s[0],E=s[1],M=[{dataIndex:"id",valueType:"indexBorder",width:48},{title:"\u9700\u6C42\u63CF\u8FF0",dataIndex:"definitionName",editable:function(m,f,v){return!1}},{title:"\u6307\u6807\u540D\u79F0",dataIndex:"indicatorName",editable:!1},{title:"\u503C",dataIndex:"val"},{title:"\u7248\u672C",dataIndex:"version"},{title:"\u521B\u5EFA\u65E5\u671F",sorter:!0,dataIndex:"createDate",valueType:"dateTime",editable:!1},i.isEdit?{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(m,f,v,a){return[(0,d.jsx)("a",{onClick:function(){var g;a==null||(g=a.startEditable)===null||g===void 0||g.call(a,f.id)},children:"\u7F16\u8F91"},"editor")]}}:{}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(J.Z,{title:"\u9700\u6C42\u586B\u5145",width:"800px",modalProps:{onCancel:function(){var h=(0,p.Z)(u().mark(function f(){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},f)}));function m(){return h.apply(this,arguments)}return m}()},visible:i.modalVisible,onVisibleChange:function(){var h=(0,p.Z)(u().mark(function m(f){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i.onVisibleChange(f);case 1:case"end":return a.stop()}},m)}));return function(m){return h.apply(this,arguments)}}(),onFinish:function(){var h=(0,p.Z)(u().mark(function m(f){var v,a;return u().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return v=Y.default.loading("\u6B63\u5728\u63D0\u4EA4"),g.prev=1,g.next=4,B({id:(a=i.currentRecord)===null||a===void 0?void 0:a.id,state:"2"});case 4:v(),Y.default.success("\u63D0\u4EA4\u6210\u529F\uFF01"),i.onVisibleChange(!1),i.updateDefinitionTable(),g.next=14;break;case 10:g.prev=10,g.t0=g.catch(1),v(),Y.default.error("\u63D0\u4EA4\u5931\u8D25,\u8BF7\u518D\u8BD5\u4E00\u6B21\uFF01");case 14:case"end":return g.stop()}},m,null,[[1,10]])}));return function(m){return h.apply(this,arguments)}}(),submitter:{searchConfig:{submitText:"\u63D0\u4EA4",resetText:"\u53D6\u6D88"},render:function(m,f){return[f[0],(0,d.jsx)(te.Z,{onClick:(0,p.Z)(u().mark(function v(){return u().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,E(!0);case 2:case"end":return y.stop()}},v)})),children:"\u53CD\u9988\u9000\u56DE"},"feedbackBtn"),f[1]]}},children:(0,d.jsx)(Z.ZP,{columns:M,rowKey:"id",request:n,params:{definitionId:(c=i.currentRecord)===null||c===void 0?void 0:c.id},search:!1,pagination:!1,toolBarRender:!1,editable:{onSave:function(){var h=(0,p.Z)(u().mark(function f(v,a,y){return u().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log(v,a,y),A.next=3,b({id:a.id,val:a.val,version:a.version});case 3:case"end":return A.stop()}},f)}));function m(f,v,a){return h.apply(this,arguments)}return m}(),actionRender:function(m,f,v){return[v.save,v.cancel]}}})}),(0,d.jsx)(re,{visible:O,onVisibleChange:E,onFinish:function(){var h=(0,p.Z)(u().mark(function m(f){return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L((0,D.Z)({id:i.currentRecord.id,state:"0"},f));case 2:return a.next=4,i.updateDefinitionTable();case 4:return i.onVisibleChange(!1),a.abrupt("return",!0);case 6:case"end":return a.stop()}},m)}));return function(m){return h.apply(this,arguments)}}()})]})},ie=t(75640),le=function(){var i=(0,x.useState)(!0),c=(0,P.Z)(i,2),C=c[0],s=c[1],O=(0,x.useState)(),E=(0,P.Z)(O,2),M=E[0],h=E[1],m=(0,x.useState)("1"),f=(0,P.Z)(m,2),v=f[0],a=f[1],y=(0,x.useState)(!1),g=(0,P.Z)(y,2),A=g[0],N=g[1],ue=(0,x.useState)(!1),Q=(0,P.Z)(ue,2),se=Q[0],X=Q[1],q=(0,x.useRef)(),oe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u8BF4\u660E",dataIndex:"description",valueType:"textarea"},{title:"\u521B\u5EFA\u4EBA",dataIndex:"creatorName"},{title:"\u72B6\u6001",dataIndex:"state",hideInForm:!0,valueEnum:{1:{text:"\u5F85\u586B\u5145",status:"Processing"},2:{text:"\u5DF2\u586B\u5145",status:"Processing"},3:{text:"\u5DF2\u5BA1\u7B7E",status:"Processing"},4:{text:"\u5DF2\u5224\u5B9A",status:"Processing"},5:{text:"\u5DF2\u5B8C\u6210",status:"Success"},6:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u521B\u5EFA\u65E5\u671F",sorter:!0,dataIndex:"createDate",valueType:"dateTime",renderFormItem:function(R,_,U){var G=_.defaultRender,ee=(0,S.Z)(_,["defaultRender"]),z=U.getFieldValue("status");return"".concat(z)==="0"?!1:G(R)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(R,_){var U=(0,d.jsx)("a",{onClick:function(){N(!0),h(_),s(!0)},children:"\u7F16\u8F91"},"editor"),G=(0,d.jsx)("a",{onClick:function(){N(!0),h(_),s(!1)},children:"\u67E5\u770B"},"view"),ee=(0,d.jsx)("a",{onClick:function(){X(!0),h(_)},children:"\u5BA1\u6279"},"viewApproval");return[v=="1"?U:G,ee]}}];return(0,d.jsxs)(I.ZP,{children:[(0,d.jsx)(Z.ZP,{actionRef:q,columns:oe,rowKey:"id",request:l,params:{state:v},search:!1,toolBarRender:function(){return[(0,d.jsxs)(w.Z,{placeholder:"\u5F85\u586B\u5145",onChange:function(_,U){a(_)},children:[(0,d.jsx)(w.Z.Option,{value:"1",children:"\u5F85\u586B\u5145"}),(0,d.jsx)(w.Z.Option,{value:"2,3,4,5",children:"\u5DF2\u586B\u5145"})]})]}}),(0,d.jsx)(ae,{isEdit:C,currentRecord:M,modalVisible:A,onVisibleChange:N,updateDefinitionTable:function(){var R;return(R=q.current)===null||R===void 0?void 0:R.reload()}}),(0,d.jsx)(ie.Z,{definitionId:(M==null?void 0:M.id)+"",visible:se,onVisibleChange:X})]})}},75640:function(H,F,t){"use strict";var V=t(3182),w=t(94043),S=t.n(w),P=t(37476),I=t(19595),x=t(67294),Z=t(48971),D=t(85893);F.Z=function(p){var W=(0,x.useRef)(),u=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5F53\u524D\u8282\u70B9",dataIndex:"kindName"},{title:"\u5BA1\u6279\u4EBA",dataIndex:"creatorName"},{title:"\u5B8C\u6210\u65F6\u95F4",sorter:!0,dataIndex:"createDate",valueType:"dateTime"},{title:"\u5BA1\u6279\u7C7B\u578B",dataIndex:"approvalResult",hideInForm:!0,valueEnum:{0:{text:"\u4E0D\u901A\u8FC7",status:"Error"},1:{text:"\u901A\u8FC7",status:"Success"}}},{title:"\u5BA1\u6279\u610F\u89C1",dataIndex:"approvalComment",valueType:"textarea"}];return(0,D.jsx)(P.Z,{title:"\u5BA1\u6279\u8BE6\u7EC6",width:"800px",layout:"horizontal",visible:p.visible,onVisibleChange:p.onVisibleChange,submitter:{searchConfig:{resetText:"\u5173\u95ED"},render:function(l,r){return[r[0]]}},children:(0,D.jsx)(I.ZP,{actionRef:W,columns:u,rowKey:"id",search:!1,toolBarRender:!1,params:{definitionId:p.definitionId},request:function(){var e=(0,V.Z)(S().mark(function l(r){return S().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.WY)("/algz/approvalcommentmanger/approvalcomments",{params:r}));case 1:case"end":return o.stop()}},l)}));return function(l){return e.apply(this,arguments)}}()})})}}}]);
