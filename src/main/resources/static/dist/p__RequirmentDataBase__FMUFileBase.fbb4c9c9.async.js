(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[572],{9848:function(ee,z,e){"use strict";e.r(z),e.d(z,{default:function(){return oe}});var b=e(57663),W=e(71577),p=e(62350),E=e(75443),q=e(34792),y=e(48086),R=e(3182),U=e(93224),Z=e(2824),$=e(94043),m=e.n($),B=e(75362),P=e(67294),x=e(19595),s=e(49101),v=e(48971);function A(O){return r.apply(this,arguments)}function r(){return r=(0,R.Z)(m().mark(function O(c){return m().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,v.WY)("/algz/fmufilemanager/fmufiles",{params:c}));case 1:case"end":return C.stop()}},O)})),r.apply(this,arguments)}var de=e(43185),re=e(94412),Q=e(86582),ce=e(9715),_=e(86585),ae=e(7085),ne=e(84391),te=e(37476),le=e(5966),ue=e(90672),X=e(53858),l=e(85893),se=function(c){var K=_.Z.useForm(),C=(0,Z.Z)(K,1),S=C[0],Y=(0,P.useState)([]),N=(0,Z.Z)(Y,2),h=N[0],V=N[1],G=(0,P.useState)(void 0),D=(0,Z.Z)(G,2),L=D[0],I=D[1],k=(0,P.useState)([]),J=(0,Z.Z)(k,2),M=J[0],f=J[1],g=(0,l.jsxs)("div",{children:[L?(0,l.jsx)(ae.Z,{}):(0,l.jsx)(s.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),j=function(o,d){var n=new FileReader;n.addEventListener("load",function(){return d(n.result)}),n.readAsDataURL(o)};return(0,l.jsxs)(te.Z,{form:S,title:"FMU\u6587\u4EF6\u7A97\u53E3",width:"800px",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:14},modalProps:{onCancel:function(){var i=(0,R.Z)(m().mark(function d(){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},d)}));function o(){return i.apply(this,arguments)}return o}()},visible:c.modalVisible,onVisibleChange:function(){var i=(0,R.Z)(m().mark(function o(d){var n,a,u,F,w,t;return m().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!d){T.next=17;break}if(S.resetFields(),h.length=0,I(""),c.currentRecord==null){T.next=17;break}return T.next=7,(0,X.PD)({id:(n=c.currentRecord)===null||n===void 0?void 0:n.id});case 7:for(a=T.sent,S.setFieldsValue(a),a.picPath!=null&&I("/algz/common/file/down?pathcode="+a.picPath),u=a.filePath==null?[]:a.filePath.split(","),F=a.fileName==null?[]:a.fileName.split(","),w=[],t=0;t<u.length;t++)w=[].concat((0,Q.Z)(w),[{uid:u[t],name:F[t],status:"done",url:"/algz/common/file/down?pathcode="+u[t]}]);V(w),w=[{uid:a.picPath,name:a.picName,status:"done",url:"/algz/common/file/down?pathcode="+a.picPath}],f(w);case 17:c.onVisibleChange(d);case 18:case"end":return T.stop()}},o)}));return function(o){return i.apply(this,arguments)}}(),onFinish:function(){var i=(0,R.Z)(m().mark(function o(d){var n,a,u,F;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,h.forEach(function(H){a.append("file",H)}),M.forEach(function(H){a.append("picFile",H)}),c.currentRecord!=null&&a.append("id",c.currentRecord.id+""),a.append("kindId",c.selectNodeKey.kindId),a.append("name",S.getFieldValue("name")),a.append("description",(n=S.getFieldValue("description"))!==null&&n!==void 0?n:""),u=y.default.loading("\u6B63\u5728\u63D0\u4EA4"),t.prev=8,t.next=11,(0,X.FJ)(a);case 11:if(F=t.sent,F!=""){t.next=19;break}u(),y.default.success("\u63D0\u4EA4\u6210\u529F\uFF01"),c.onVisibleChange(!1),c.updateParentTable(),t.next=20;break;case 19:throw new Error(F);case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(8),u(),y.default.error(t.t0.message);case 26:case"end":return t.stop()}},o,null,[[8,22]])}));return function(o){return i.apply(this,arguments)}}(),initialValues:{},children:[(0,l.jsx)(le.Z,{name:"name",label:"\u540D\u79F0",width:"md",tooltip:"\u6700\u957F\u4E3A 24 \u4F4D",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0}]}),(0,l.jsx)(_.Z.Item,{label:"FMU\u6587\u4EF6\u5730\u5740",children:(0,l.jsx)(re.Z,{name:"files",action:"/algz/common/file/upload",fileList:h,onRemove:function(){var i=(0,R.Z)(m().mark(function o(d){var n,a;return m().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,X.KI)({id:(n=c.currentRecord)===null||n===void 0?void 0:n.id,filePath:d.uid});case 2:a=h.indexOf(d),h.splice(a,1),V((0,Q.Z)(h));case 5:case"end":return F.stop()}},o)}));return function(o){return i.apply(this,arguments)}}(),beforeUpload:function(o){return V([].concat((0,Q.Z)(h),[o])),console.log("Upload event:",V),!1},children:(0,l.jsx)(W.Z,{icon:(0,l.jsx)(ne.Z,{}),children:"\u5355\u51FB\u4E0A\u4F20"})})}),(0,l.jsx)(ue.Z,{name:"description",label:"\u8BF4\u660E",tooltip:"\u6700\u957F\u4E3A 225 \u4F4D",placeholder:"\u8BF7\u8F93\u5165\u8BF4\u660E"})]})},ie=se,oe=function(){var O=(0,P.useState)("0"),c=(0,Z.Z)(O,2),K=c[0],C=c[1],S=(0,P.useState)(!1),Y=(0,Z.Z)(S,2),N=Y[0],h=Y[1],V=(0,P.useState)(),G=(0,Z.Z)(V,2),D=G[0],L=G[1],I=(0,P.useRef)(),k=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u8BF4\u660E",dataIndex:"description",valueType:"textarea"},{title:"\u521B\u5EFA\u4EBA",dataIndex:"creator"},{title:"\u521B\u5EFA\u65E5\u671F",sorter:!0,dataIndex:"createDate",valueType:"dateTime",renderFormItem:function(f,g,j){var i=g.defaultRender,o=(0,U.Z)(g,["defaultRender"]),d=j.getFieldValue("status");return"".concat(d)==="0"?!1:i(f)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(f,g){return[(0,l.jsx)("a",{onClick:function(){h(!0),L(g)},children:"\u7F16\u8F91"},"editor"),J("\u5220\u9664",g,function(){var j=(0,R.Z)(m().mark(function i(o){var d,n;return m().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return d=y.default.loading("\u6B63\u5728\u5220\u9664"),u.prev=1,d(),y.default.success("\u5220\u9664\u6210\u529F\uFF01"),(n=I.current)===null||n===void 0||n.reload(),u.abrupt("return",!0);case 8:return u.prev=8,u.t0=u.catch(1),d(),y.default.error("\u5220\u9664\u5931\u8D25,\u8BF7\u518D\u8BD5\u4E00\u6B21\uFF01"),u.abrupt("return",!1);case 13:case"end":return u.stop()}},i,null,[[1,8]])}));return function(i){return j.apply(this,arguments)}}())]}}],J=function(f,g,j){return(0,l.jsx)(E.Z,{title:"\u662F\u5426".concat(f,"\u8FD9\u4E2A\u9879\u76EE\uFF1F"),onConfirm:function(){return j(g)},okText:"\u662F",cancelText:"\u5426",children:(0,l.jsx)("a",{children:f})},"popconfirm1")};return(0,l.jsxs)(B.ZP,{children:[(0,l.jsx)(x.ZP,{actionRef:I,columns:k,rowKey:"id",onRow:function(f){return{onClick:function(){return L(f)}}},tableAlertRender:!1,rowSelection:{type:"checkbox",hideSelectAll:!0,selectedRowKeys:[(D==null?void 0:D.id)+""],onSelect:function(f,g,j,i){}},params:{state:K},request:A,search:!1,toolBarRender:function(){return[(0,l.jsxs)(W.Z,{type:"primary",onClick:function(){h(!0),L(null)},children:[(0,l.jsx)(s.Z,{})," \u65B0\u5EFA"]},"primary")]}}),(0,l.jsx)(ie,{modalVisible:N,onVisibleChange:h,currentRecord:D,updateParentTable:function(){var f;(f=I.current)===null||f===void 0||f.reload()}})]})}},53858:function(ee,z,e){"use strict";e.d(z,{hM:function(){return q},FJ:function(){return R},PD:function(){return Z},Fv:function(){return m},KI:function(){return P}});var b=e(3182),W=e(94043),p=e.n(W),E=e(48971);function q(s){return y.apply(this,arguments)}function y(){return y=(0,b.Z)(p().mark(function s(v){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/algz/modelmanager/models",{params:v}));case 1:case"end":return r.stop()}},s)})),y.apply(this,arguments)}function R(s){return U.apply(this,arguments)}function U(){return U=(0,b.Z)(p().mark(function s(v){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/algz/modelmanager/savemodel",{method:"POST",processData:!1,requestType:"form",data:v}));case 1:case"end":return r.stop()}},s)})),U.apply(this,arguments)}function Z(s){return $.apply(this,arguments)}function $(){return $=(0,b.Z)(p().mark(function s(v){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/algz/modelmanager/model",{params:v}));case 1:case"end":return r.stop()}},s)})),$.apply(this,arguments)}function m(s){return B.apply(this,arguments)}function B(){return B=(0,b.Z)(p().mark(function s(v){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/algz/modelmanager/delmodel",{params:v}));case 1:case"end":return r.stop()}},s)})),B.apply(this,arguments)}function P(s){return x.apply(this,arguments)}function x(){return x=(0,b.Z)(p().mark(function s(v){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.WY)("/algz/modelmanager/delmodelfile",{params:v}));case 1:case"end":return r.stop()}},s)})),x.apply(this,arguments)}}}]);
